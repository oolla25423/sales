# Инструкции по развертыванию приложения на PythonAnywhere

## Подготовка к развертыванию

1. Создайте аккаунт на [PythonAnywhere](https://www.pythonanywhere.com/) (можно использовать бесплатный план)

2. Подготовьте ваш код для загрузки:
   - Убедитесь, что все зависимости указаны в `requirements.txt`
   - Убедитесь, что структура проекта корректна

## Загрузка кода на PythonAnywhere

### Вариант 1: Загрузка через веб-интерфейс
1. Войдите в ваш аккаунт PythonAnywhere
2. Перейдите в раздел "Files" 
3. Создайте новую папку для вашего проекта (например, `sales_project`)
4. Загрузите все файлы проекта в эту папку:
   - Все файлы и папки из локального проекта
   - Убедитесь, что структура сохранена

### Вариант 2: Загрузка через Git
1. Загрузите ваш проект на GitHub
2. Войдите в ваш аккаунт PythonAnywhere
3. Откройте консоль (вкладка "Consoles")
4. Клонируйте репозиторий:
   ```
   git clone https://github.com/ваш_логин/название_репозитория.git
   ```

## Настройка виртуального окружения

1. Перейдите во вкладку "Consoles" и откройте Bash консоль
2. Создайте виртуальное окружение:
   ```
   mkvirtualenv sales_project --python=/usr/bin/python3.10
   ```
3. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```

## Создание веб-приложения

1. Перейдите во вкладку "Web" 
2. Нажмите "Add a new web app"
3. Нажмите "Next"
4. Выберите "Manual configuration" (не Django)
5. Выберите версию Python (например, 3.10)
6. Нажмите "Next"

## Настройка веб-приложения

1. В разделе "Virtualenv" укажите путь к виртуальному окружению:
   ```
   /home/ваш_логин/.virtualenvs/sales_project
   ```

2. В разделе "Code" укажите путь к вашему проекту:
   ```
   /home/ваш_логин/путь_к_проекту
   ```

3. В разделе "WSGI configuration file" замените содержимое на следующее:
   ```python
   import os
   import sys
   
   path = '/home/ваш_логин/путь_к_проекту'
   if path not in sys.path:
       sys.path.append(path)
   
   os.chdir(path)
   os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'sales_project.settings')
   
   import django
   from django.core.wsgi import get_wsgi_application
   from django.contrib.staticfiles.handlers import StaticFilesHandler
   
   django.setup()
   application = StaticFilesHandler(get_wsgi_application())
   ```

## Настройка статических файлов

1. В разделе "Static files" добавьте запись:
   - URL: `/static/`
   - Path: `/home/ваш_логин/путь_к_проекту/static/`

## Создание базы данных

1. В консоли перейдите в директорию проекта:
   ```
   cd /home/ваш_логин/путь_к_проекту
   ```
2. Создайте миграции:
   ```
   python manage.py makemigrations
   ```
3. Примените миграции:
   ```
   python manage.py migrate
   ```
4. Создайте суперпользователя (опционально):
   ```
   python manage.py createsuperuser
   ```

## Создание директории для загрузок

1. В консоли создайте директорию для загрузок:
   ```
   mkdir uploads
   ```

## Перезагрузка веб-приложения

1. Вернитесь во вкладку "Web"
2. Нажмите зеленую кнопку "Reload" для перезагрузки приложения

## Тестирование

1. Перейдите по адресу вашего приложения:
   ```
   https://ваш_логин.pythonanywhere.com/
   ```
2. Проверьте все функции приложения:
   - Добавление данных через форму
   - Сохранение в файлы и в базу данных
   - Загрузка файлов
   - Поиск, редактирование и удаление записей из базы данных

## Возможные проблемы и решения

1. **Ошибка 500 при доступе к приложению**:
   - Проверьте логи ошибок во вкладке "Web" -> "Error log"
   - Убедитесь, что все зависимости установлены
   - Проверьте правильность путей в WSGI конфигурации

2. **Статические файлы не загружаются**:
   - Проверьте настройки статических файлов
   - Убедитесь, что вы выполнили `python manage.py collectstatic` (если используется)

3. **Проблемы с базой данных**:
   - Убедитесь, что миграции применены
   - Проверьте права доступа к файлу базы данных

4. **Проблемы с загрузкой файлов**:
   - Убедитесь, что директория `uploads` существует
   - Проверьте права доступа к директории