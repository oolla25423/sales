# Система управления данными о продажах

## Обзор
Это Django-приложение позволяет пользователям управлять данными о продажах с возможностью импорта и экспорта данных в форматах JSON и XML. Приложение предоставляет функциональность для:
- Ввода данных о продажах через HTML-форму
- Сохранения данных в формате JSON или XML
- Загрузки существующих файлов JSON/XML
- Просмотра всех данных о продажах из сохраненных файлов
- Скачивания и удаления файлов

## Реализованные функции

### 1. Форма ввода данных
- HTML-форма для ввода информации о продажах:
  - Название продукта
  - Количество
  - Цена
  - Дата продажи
  - Имя клиента
  - Электронная почта клиента
- Валидация формы для всех полей

### 2. Хранение данных
- Сохранение данных в формате JSON или XML
- Файлы хранятся в каталоге `uploads`
- Уникальные имена файлов генерируются для каждого сохраненного файла

### 3. Загрузка файлов
- Загрузка существующих файлов JSON или XML
- Валидация файлов для обеспечения правильного формата
- Недействительные файлы отклоняются и удаляются

### 4. Отображение данных
- Просмотр всех данных о продажах из существующих файлов
- Список всех файлов JSON и XML в каталоге uploads
- Скачивание или удаление существующих файлов

## Структура проекта
```
sales_project/
├── manage.py
├── sales_project/
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
├── sales_data/
│   ├── __init__.py
│   ├── apps.py
│   ├── models.py
│   ├── forms.py
│   ├── views.py
│   ├── urls.py
│   ├── templates/
│   │   └── sales_data/
│   │       └── index.html
│   ├── static/
│   ├── migrations/
│   └── tests.py
├── uploads/ (создается во время выполнения)
├── requirements.txt
└── README.md
```

## Как запустить

1. Создайте и активируйте виртуальное окружение:
   ```
   python -m venv venv
   .\venv\bin\Activate.ps1  # В Windows
   source venv/bin/activate  # В macOS/Linux
   ```

2. Установите необходимые пакеты:
   ```
   pip install --trusted-host pypi.org --trusted-host pypi.python.org --trusted-host files.pythonhosted.org django
   ```

3. Примените миграции:
   ```
   python manage.py migrate
   ```

4. Создайте суперпользователя (опционально):
   ```
   python manage.py shell -c "from django.contrib.auth.models import User; User.objects.create_superuser('admin', 'admin@example.com', 'admin123')"
   ```

5. Запустите сервер разработки:
   ```
   python manage.py runserver
   ```

6. Откройте приложение по адресу http://127.0.0.1:8000/

## Инструкции по использованию

1. **Добавление данных о продажах**:
   - Заполните форму информацией о продажах
   - Выберите, сохранять ли как JSON или XML
   - Нажмите "Сохранить продажу"

2. **Загрузка файлов**:
   - Нажмите "Выберите файл" для выбора файла JSON или XML
   - Нажмите "Загрузить файл"
   - Действительные файлы будут сохранены в каталоге uploads

3. **Просмотр данных**:
   - Все данные о продажах из файлов JSON и XML будут отображены в таблице
   - Файлы перечислены в разделе "Существующие файлы"

4. **Управление файлами**:
   - Скачивайте файлы с помощью кнопки "Скачать"
   - Удаляйте файлы с помощью кнопки "Удалить" (с подтверждением)

## Технические детали

### Валидация данных
- Валидация формы для всех полей ввода
- Валидация файлов для загруженных файлов JSON/XML
- Правильная обработка ошибок и обратная связь с пользователем

### Соображения безопасности
- Имена файлов очищаются для предотвращения атак обхода каталогов
- Принимаются только файлы JSON и XML для загрузки
- Недействительные файлы автоматически удаляются

### Структура данных
Данные о продажах включают:
- Идентификатор UUID
- Название продукта (строка)
- Количество (целое число)
- Цена (десятичное число)
- Дата продажи (дата и время)
- Имя клиента (строка)
- Электронная почта клиента (email)

## Тестирование
Тестовые файлы включены:
- `test_sale.json` - Пример данных о продажах в формате JSON
- `test_sale.xml` - Пример данных о продажах в формате XML

Эти файлы можно переместить в каталог uploads для целей тестирования.